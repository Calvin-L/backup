plugins {
    id "java"
    id "application"
    id "io.freefair.lombok" version "4.1.6"
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(12)
    }
}

version = "1.0"

////////////////////////// Application setup
application {
    mainClass = "cal.bkup.Main"
}

////////////////////////// External deps
repositories {
    mavenCentral()
}

def aws_sdk_version = "1.11.979"

dependencies {
    implementation project(":aes-crypt")
    implementation project(":crash-safe-io")
    implementation "com.amazonaws:aws-java-sdk-glacier:${aws_sdk_version}"
    implementation "com.amazonaws:aws-java-sdk-s3:${aws_sdk_version}"
    implementation "com.amazonaws:aws-java-sdk-dynamodb:${aws_sdk_version}"
    implementation "org.xerial:sqlite-jdbc:3.8.11.2"
    implementation "org.tukaani:xz:1.6"
    implementation "commons-cli:commons-cli:1.3.1"
    implementation "com.fasterxml.jackson.core:jackson-databind:2.12.2"
    implementation "org.apache.commons:commons-math3:3.6.1"
    implementation "com.google.code.findbugs:jsr305:3.0.2"
    implementation "com.google.guava:guava:27.1-jre"
    testImplementation "org.testng:testng:6.10"

    // The AWS SDK issues a warning if the JAXB classes are not available.
    // There is a fallback implementation so functionality is not affected,
    // but the warning is annoying enough to be worth silencing.
    runtimeOnly "javax.xml.bind:jaxb-api:2.3.1"
}

////////////////////////// Testing
test { useTestNG() }
