plugins {
    id "java"
    id "application"
    id "io.freefair.lombok" version "3.2.1"
}

sourceCompatibility = 10
targetCompatibility = 10
version = "1.0"

////////////////////////// Application setup
application {
    mainClassName = "cal.bkup.Main"
}
jar {
    manifest {
        attributes "Main-Class": mainClassName,
            "Manifest-Version": version,
            "Application-Name": "Backup"
    }
}

////////////////////////// External deps
repositories {
    mavenCentral()
}

dependencies {
    compile project(":aes-crypt")
    compile project(":crash-safe-io")
    compile "com.amazonaws:aws-java-sdk-glacier:1.11.546"
    compile "com.amazonaws:aws-java-sdk-s3:1.11.546"
    compile "com.amazonaws:aws-java-sdk-dynamodb:1.11.546"
    compile "org.xerial:sqlite-jdbc:3.8.11.2"
    compile "org.tukaani:xz:1.6"
    compile "commons-cli:commons-cli:1.3.1"
    compile "com.fasterxml.jackson.core:jackson-databind:2.9.8"
    compile "org.apache.commons:commons-math3:3.6.1"
    compile "com.google.code.findbugs:jsr305:3.0.2"
    compile "com.google.guava:guava:27.1-jre"
    testCompile "org.testng:testng:6.10"

    // The AWS SDK issues a warning if the JAXB classes are not available.
    // There is a fallback implementation so functionality is not affected,
    // but the warning is annoying enough to be worth silencing.
    runtime "javax.xml.bind:jaxb-api:2.3.1"
}

////////////////////////// Testing
test { useTestNG() }
